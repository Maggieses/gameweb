(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53328672"],{"4c16":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("b-container",{attrs:{fluid:""}},[e("h1",{staticStyle:{"text-align":"center"}},[t._v("Zmień ustawienia konta")]),e("b-row",{attrs:{cols:"2"}},[e("b-col",{staticStyle:{display:"grid"}},[e("h4",{staticClass:"left"},[t._v("Twój avatar:")]),e("img",{staticClass:"left",attrs:{alt:"avatar",src:t.avatar}}),e("input",{staticClass:"left",attrs:{type:"file"},on:{change:t.changeImage}}),e("b-button",{staticClass:"button",on:{click:t.handleChange}},[t._v("Zmień avatar")])],1),e("b-col",[e("h4",{staticClass:"left"},[t._v("Twój obecny mail: "+t._s(t.currentUser.email))]),e("h5",{staticClass:"left"},[t._v("Zmień hasło:")]),e("form",{attrs:{name:"form"},on:{submit:function(a){return a.preventDefault(),t.handleChangePass(a)}}},[e("div",{staticClass:"left",staticStyle:{display:"inline-flex"}},[e("h6",{staticStyle:{"min-width":"10rem"}},[t._v("Podaj stare hasło:")]),e("b-form-input",{staticClass:"input",attrs:{name:"oldPassword",type:"password",required:""},model:{value:t.oldPassword,callback:function(a){t.oldPassword=a},expression:"oldPassword"}})],1),e("div",{staticClass:"left",staticStyle:{display:"inline-flex"}},[e("h6",{staticStyle:{"min-width":"10rem"}},[t._v("Podaj nowe hasło:")]),e("b-form-input",{staticClass:"input",attrs:{name:"newPassword",type:"password",required:""},model:{value:t.newPassword,callback:function(a){t.newPassword=a},expression:"newPassword"}})],1),e("b-button",{staticClass:"button",attrs:{type:"submit"}},[t._v("Zmień hasło")]),!0===t.dispatched?e("b-alert",{staticClass:"left text-center",attrs:{show:"",variant:"success"}},[t._v("Hasło zostało zmienione")]):t._e(),!0===t.exist?e("b-alert",{staticClass:"left text-center",attrs:{show:"",variant:"danger"}},[t._v("Nieprawidłowe hasło")]):t._e()],1)])],1)],1)],1)},n=[],i=(e("d3b7"),e("3ca3"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("20bf"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("ddb0"),e("2b3d"),e("bc3a")),r=e.n(i),o="http://localhost:8086/",c={name:"Account",data:function(){return{avatar:"",dispatched:!1,exist:!1,selectedFile:null,email:"",oldPassword:"",newPassword:""}},computed:{currentUser:function(){return this.$store.state.auth.user}},methods:{handleChangePass:function(){var t=this,a=new FormData;a.append("id",this.currentUser.id),a.append("newpassword",this.newPassword),a.append("oldpassword",this.oldPassword),r.a.put(o+"users/"+this.currentUser.id+"/changePassword",a,{withCredentials:!0}).then((function(a){t.dispatched=!0,console.log(a)})).catch((function(a){console.log(a),t.exist=!0}))},changeImage:function(t){console.log(t),this.selectedFile=t.target.files[0]},handleChange:function(){var t=this;null===this.selectedFile&&this.$router.go();var a=new FormData;a.append("avatar",this.selectedFile),a.append("id",this.currentUser.id),r.a.put(o+"users/"+this.currentUser.id+"/uploadAvatar",a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then((function(a){console.log(a),t.$router.go()})).catch((function(t){console.log(t)}))}},mounted:function(){var t=this;this.currentUser||this.$router.push("Login"),r.a.get(o+"users/"+this.currentUser.id+"/getAvatar",{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then((function(a){var e=a.data.data,s=Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)})),n=new Blob([s],{type:"image/gif"});t.avatar=URL.createObjectURL(n)})).catch((function(t){console.log(t)}))}},l=c,d=(e("8f76"),e("2877")),u=Object(d["a"])(l,s,n,!1,null,"21711e6c",null);a["default"]=u.exports},"7386a":function(t,a,e){},"8f76":function(t,a,e){"use strict";var s=e("7386a"),n=e.n(s);n.a}}]);
//# sourceMappingURL=chunk-53328672.a05edd24.js.map