{"version":3,"sources":["webpack:///./src/components/Account.vue?4a32","webpack:///src/components/Account.vue","webpack:///./src/components/Account.vue?6022","webpack:///./src/components/Account.vue","webpack:///./src/components/Account.vue?6d6b"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","_v","avatar","on","changeImage","handleChange","_s","currentUser","email","$event","preventDefault","handleChangePass","model","value","callback","$$v","oldPassword","expression","newPassword","dispatched","_e","exist","staticRenderFns","name","data","selectedFile","computed","$store","state","auth","user","methods","fd","append","console","log","response","error","event","target","files","$router","go","id","mounted","push","component"],"mappings":"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","file":"js/chunk-4502597f.d173d313.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('b-container',{attrs:{\"fluid\":\"\"}},[_c('h1',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Zmień ustawienia konta\")]),_c('b-row',{attrs:{\"cols\":\"2\"}},[_c('b-col',{staticStyle:{\"display\":\"grid\"}},[_c('h4',{staticClass:\"left\"},[_vm._v(\"Twój avatar:\")]),_c('img',{staticClass:\"left\",attrs:{\"alt\":\"avatar\",\"src\":_vm.avatar}}),_c('input',{staticClass:\"left\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.changeImage}}),_c('b-button',{staticClass:\"button\",on:{\"click\":_vm.handleChange}},[_vm._v(\"Zmień avatar\")])],1),_c('b-col',[_c('h4',{staticClass:\"left\"},[_vm._v(\"Twój obecny mail: \"+_vm._s(_vm.currentUser.email))]),_c('h5',{staticClass:\"left\"},[_vm._v(\"Zmień hasło:\")]),_c('form',{attrs:{\"name\":\"form\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.handleChangePass($event)}}},[_c('div',{staticClass:\"left\",staticStyle:{\"display\":\"inline-flex\"}},[_c('h6',{staticStyle:{\"min-width\":\"10rem\"}},[_vm._v(\"Podaj stare hasło:\")]),_c('b-form-input',{staticClass:\"input\",attrs:{\"name\":\"oldPassword\",\"type\":\"password\",\"required\":\"\"},model:{value:(_vm.oldPassword),callback:function ($$v) {_vm.oldPassword=$$v},expression:\"oldPassword\"}})],1),_c('div',{staticClass:\"left\",staticStyle:{\"display\":\"inline-flex\"}},[_c('h6',{staticStyle:{\"min-width\":\"10rem\"}},[_vm._v(\"Podaj nowe hasło:\")]),_c('b-form-input',{staticClass:\"input\",attrs:{\"name\":\"newPassword\",\"type\":\"password\",\"required\":\"\"},model:{value:(_vm.newPassword),callback:function ($$v) {_vm.newPassword=$$v},expression:\"newPassword\"}})],1),_c('b-button',{staticClass:\"button\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Zmień hasło\")]),(_vm.dispatched === true)?_c('b-alert',{staticClass:\"left text-center\",attrs:{\"show\":\"\",\"variant\":\"success\"}},[_vm._v(\"Hasło zostało zmienione\")]):_vm._e(),(_vm.exist === true)?_c('b-alert',{staticClass:\"left text-center\",attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_vm._v(\"Nieprawidłowe hasło\")]):_vm._e()],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <b-container fluid>\r\n      <h1 style=\"text-align:center;\">Zmień ustawienia konta</h1>\r\n      <b-row cols=\"2\">\r\n        <b-col style=\"display:grid;\">\r\n          <h4 class=\"left\">Twój avatar:</h4>\r\n          <img class=\"left\" alt=\"avatar\" :src=\"avatar\" />\r\n          <input class=\"left\" type=\"file\" @change=\"changeImage\" />\r\n          <b-button class=\"button\" @click=\"handleChange\">Zmień avatar</b-button>\r\n        </b-col>\r\n        <b-col>\r\n          <h4 class=\"left\">Twój obecny mail: {{ currentUser.email }}</h4>\r\n          <h5 class=\"left\">Zmień hasło:</h5>\r\n          <form name='form' @submit.prevent='handleChangePass'>\r\n            <div class=\"left\" style=\"display:inline-flex;\">\r\n              <h6 style=\"min-width:10rem;\">Podaj stare hasło:</h6>\r\n              <b-form-input name=\"oldPassword\" class=\"input\" type=\"password\" v-model=\"oldPassword\" required/>\r\n            </div>\r\n            <div class=\"left\" style=\"display:inline-flex;\">\r\n              <h6 style=\"min-width:10rem;\">Podaj nowe hasło:</h6>\r\n              <b-form-input name=\"newPassword\" class=\"input\" type=\"password\" v-model=\"newPassword\" required/>\r\n            </div>\r\n            <b-button class=\"button\" type=\"submit\">Zmień hasło</b-button>\r\n            <b-alert class=\"left text-center\" v-if=\"dispatched === true\" show variant=\"success\" >Hasło zostało zmienione</b-alert>\r\n            <b-alert class=\"left text-center\" v-if=\"exist === true\" show variant=\"danger\" >Nieprawidłowe hasło</b-alert>\r\n          </form>\r\n        </b-col>\r\n      </b-row>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nconst API_URL = 'https://gameweb21.herokuapp.com/'\r\n//const API_URL = 'http://localhost:8086/'\r\n\r\n\r\nexport default {\r\n  name: \"Account\",\r\n  data() {\r\n    return {\r\n      avatar: \"\",\r\n      dispatched: false,\r\n      exist: false,\r\n      selectedFile: null,\r\n      email: \"\",\r\n      oldPassword: \"\",\r\n      newPassword: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    currentUser() {\r\n      return this.$store.state.auth.user;\r\n    },\r\n  },\r\n  methods: {\r\n    handleChangePass() {\r\n      const fd = new FormData();\r\n      fd.append('id',this.currentUser.id)\r\n      fd.append('newpassword',this.newPassword)\r\n      fd.append('oldpassword',this.oldPassword)\r\n      axios.put(\r\n        API_URL + \"users/\" + this.currentUser.id + \"/changePassword\", fd, {withCredentials: true}\r\n      ).then((response)=>{\r\n        this.dispatched = true\r\n        console.log(response)\r\n      }).catch((error)=>{\r\n        console.log(error)\r\n        this.exist = true\r\n      });\r\n    },\r\n    changeImage(event) {\r\n      console.log(event);\r\n      this.selectedFile = event.target.files[0];\r\n    },\r\n    handleChange() {\r\n      if (this.selectedFile === null) {\r\n        this.$router.go();\r\n      }\r\n      const fd = new FormData();\r\n      fd.append(\"avatar\", this.selectedFile);\r\n      fd.append(\"id\", this.currentUser.id);\r\n      axios\r\n        .put(\r\n          API_URL + \"users/\" +\r\n            this.currentUser.id +\r\n            \"/uploadAvatar\",\r\n          fd,\r\n          {\r\n            withCredentials: true,\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          }\r\n        )\r\n        .then((response) => {\r\n          console.log(response);\r\n          this.$router.go();\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    if (!this.currentUser) {\r\n      this.$router.push(\"Login\");\r\n    }\r\n    axios\r\n      .get(\r\n        API_URL + \"users/\" + this.currentUser.id + \"/getAvatar\",\r\n        {\r\n          withCredentials: true,\r\n          headers: {\r\n            \"Content-Type\": \"multipart/form-data\",\r\n          },\r\n        }\r\n      )\r\n      .then((response) => {\r\n        let base64 = response.data.data;\r\n        let buffer = Uint8Array.from(atob(base64), (c) => c.charCodeAt(0));\r\n        let blob = new Blob([buffer], { type: \"image/gif\" });\r\n        this.avatar = URL.createObjectURL(blob);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\nh5 h6 {\r\n  margin-top: auto;\r\n}\r\n.left {\r\n  margin: 1rem;\r\n}\r\nimg.left {\r\n  height: 8rem;\r\n  width: 8rem;\r\n}\r\n.btn {\r\n  width: 5rem;\r\n}\r\n.input {\r\n  margin-left: 1rem;\r\n  max-width: 15rem;\r\n}\r\n.col {\r\n  padding: 1rem;\r\n}\r\n.button {\r\n  margin: 1rem;\r\n  width: 15rem;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Account.vue?vue&type=template&id=fd43026c&scoped=true&\"\nimport script from \"./Account.vue?vue&type=script&lang=js&\"\nexport * from \"./Account.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Account.vue?vue&type=style&index=0&id=fd43026c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fd43026c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=style&index=0&id=fd43026c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Account.vue?vue&type=style&index=0&id=fd43026c&lang=scss&scoped=true&\""],"sourceRoot":""}